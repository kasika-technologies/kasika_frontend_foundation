var KFF=(()=>{var y=Object.defineProperty;var E=(e,t)=>{for(var r in t)y(e,r,{get:t[r],enumerable:!0})};var v={};E(v,{Component:()=>h,Event:()=>w,State:()=>O});var f=(e,t)=>{!e||e.forEach(r=>{if(r.attached.includes(t)){console.error(`${t.element} has attached node that it is also attached to`);return}r.render()})};var l=e=>{let t=()=>e.map(a=>l(a)),r=()=>{let a=e.bind(void 0);return m(a),a},n=()=>{let a=new Map;for(let[o,T]of e)a.set(o,l(T));return a},s=()=>{let a={};return m(a),a},S=()=>{let a=new Set;for(let o of set)a.add(l(o));return a},m=a=>{for(let o in e)e.hasOwnProperty(o)&&(a[o]=l(e[o]))},j=()=>e.replace(/javascript:/gi,"").replace(/[^\w-_. ]/gi,function(a){return`&#${a.charCodeAt(0)};`});switch(c(e)){case"array":return t();case"function":return r();case"map":return n();case"object":return s();case"set":return S();case"string":return j();default:return e}},d=e=>({get(t,r){return["object","array"].indexOf(c(t[r]))>-1?new Proxy(t[r],d(e)):t[r]},set(t,r,n){return t[r]===n||(t[r]=n,e.render()),!0}}),p=e=>{e.debounce&&window.cancelAnimationFrame(e.debounce),e.debounce=window.requestAnimationFrame(()=>{e.render()})},c=e=>Object.prototype.toString.call(e).slice(8,-1).toLowerCase();var g=class{attached=[];debounce=null;element;template;_data;state;constructor(t,r){this.attachTo=r.attachTo?c(r.attachTo)==="array"?r.attachTo:[r.attachTo]:[],this.element=t,this.template=r.template,this.state=r.state,this.isSharedState=!!r.isSharedState,this._data=null,r.data&&!r.state&&(this._data=new Proxy(r.data,d(this))),this.state&&this.state.attach(this),this.attachTo.length&&this.attachTo.forEach(n=>{n.attach(this)})}get data(){return this._data}set data(t){return this.state||(this._data=new Proxy(t,d(this)),p(this)),!0}attach(t){let r=c(t)==="array"?t:[t];for(let n of r)this.attached.push(n)}detach(t){let r=c(t)==="array"?t:[t];for(let n of r){let s=this.attached.indexOf(n);if(s<0)return;this.attached.splice(s,1)}}render(){if(this.isSharedState){f(this.attached,this);return}if(!this.template){console.error("No template.");return}let t=c(this.element)==="string"?document.querySelector(this.element):this.element;if(!t){console.log("No element.");return}let r=l(this.state?this.state.data:this.data),n;if(c(this.template)==="function"?n=this.template(r,t,t):n=this.template,!!["string","number"].includes(c(n)))return t.innerHTML=n,f(this.attached,this),t}},h=g;var u={},i={},k=(e,t)=>["*","window","document","document.documentElement",window,document,document.documentElement].indexOf(t)>-1?!0:typeof t!="string"&&t.contains?t===e||t.contains(taarget):e.closest(t),A=(e,t,r)=>{for(let n=0;n<e.length;n++)return e[n].selector===t&&e[n].callback.toString()===r.toString()?n:-1},b=e=>{!i[e.type]||i[e.type].forEach(t=>{!k(e.target,t.selector)||t.callback(e)})};u.get=()=>{let e={};for(let t in i)i.hasOwnProperty(t)&&(e[t]=i[t]);return e};u.on=(e,t,r)=>{!t||!r||e.split(",").forEach(n=>{n=n.trim(),i[n]||(i[n]=[],window.addEventListener(n,b,!0)),i[n].push({selector:t,callback:r})})};u.once=(e,t,r)=>{u.on(e,t,function n(s){r(s),u.off(e,t,n)})};u.off=(e,t,r)=>{e.split(",").forEach(n=>{if(n=n.trim(),!i[n])return;if(i[n].length<2||!t){delete i[n],window.removeEventListener(n,b,!0);return}let s=A(i[n],t,r);s<0||i[n].splice(s,1)})};var w=u;var x=class extends h{constructor(t){t.isSharedState=!0,super(null,t)}},O=x;return v;})();
