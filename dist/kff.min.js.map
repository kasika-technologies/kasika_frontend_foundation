{
  "version": 3,
  "sources": ["../src/kff.js", "../src/component/dom.js", "../src/component/utilities.js", "../src/component/index.js", "../src/event/index.js", "../src/state/index.js"],
  "sourcesContent": ["import Component from \"./component/index.js\";\nimport Event from \"./event/index.js\";\nimport State from \"./state/index.js\";\n\nexport {Component, Event, State}\n", "const renderAttachments = (attachments, component) => {\n    if (!attachments) return;\n\n    attachments.forEach(attachment => {\n        if (attachment.attached.includes(component)) {\n            console.error(`${component.element} has attached node that it is also attached to`);\n            return;\n        }\n\n        attachment.render();\n    })\n}\n\nexport {renderAttachments}", "const copy = (o, allowHTML) => {\n    const cloneArray = () => {\n        return o.map(item => {\n            return copy(item, allowHTML);\n        })\n    }\n\n    const cloneFunction = () => {\n        let clone = o.bind(this);\n        copyProperties(clone);\n        return clone;\n    }\n\n    const cloneMap = () => {\n        let clone = new Map();\n        for (let [k, v] of o) {\n            clone.set(k, copy(v, allowHTML));\n        }\n        return clone;\n    }\n\n    const cloneObject = () => {\n        let clone = {};\n        copyProperties(clone);\n        return clone;\n    }\n\n    const cloneSet = () => {\n        let clone = new Set();\n        for (let item of set) {\n            clone.add(copy(item, allowHTML));\n        }\n        return clone;\n    }\n\n    const copyProperties = clone => {\n        for (let key in o) {\n            if (o.hasOwnProperty(key)) {\n                clone[key] = copy(o[key], allowHTML);\n            }\n        }\n    }\n\n    const sanitizeString = () => {\n        return o.replace(/javascript:/gi, '').replace(/[^\\w-_. ]/gi, function (c) {\n            return `&#${c.charCodeAt(0)};`;\n        });\n    }\n\n    const type = getTypeOfObject(o);\n\n    switch (type) {\n        case 'array':\n            return cloneArray();\n            break;\n        case 'function':\n            return cloneFunction();\n            break;\n        case 'map':\n            return cloneMap();\n            break;\n        case 'object':\n            return cloneObject();\n            break;\n        case 'set':\n            return cloneSet();\n            break;\n        case 'string':\n            if (!allowHTML) {\n                return sanitizeString();\n            } else {\n                return o;\n            }\n            break;\n        default:\n            return o;\n            break;\n    }\n}\n\nconst dataHandler = instance => {\n    return {\n        get(object, property) {\n            if (['object', 'array'].indexOf(getTypeOfObject(object[property])) > -1) {\n                return new Proxy(object[property], dataHandler(instance));\n            }\n            return object[property];\n        },\n        set(object, property, value) {\n            if (object[property] === value) {\n                return true;\n            }\n            object[property] = value;\n            instance.render();\n            return true;\n        }\n    }\n}\n\nconst debounceRender = (buhin) => {\n    if (buhin.debounce) {\n        window.cancelAnimationFrame(buhin.debounce);\n    }\n\n    buhin.debounce = window.requestAnimationFrame(() => {\n        buhin.render();\n    })\n}\n\nconst getTypeOfObject = o => {\n    return Object.prototype.toString.call(o).slice(8, -1).toLowerCase();\n}\n\nexport {copy, dataHandler, debounceRender, getTypeOfObject}\n", "import * as dom from './dom.js';\nimport * as utilities from './utilities.js';\n\nclass Component {\n    attached = [];\n    debounce = null;\n    element;\n    template;\n    _data;\n    state;\n\n    constructor(element, options) {\n        this.attachTo = options.attachTo ? (utilities.getTypeOfObject(options.attachTo) === 'array' ? options.attachTo : [options.attachTo]) : [];\n        this.element = element;\n        this.template = options.template;\n        this.state = options.state;\n        this.isSharedState = options.isSharedState ? true : false;\n        this.allowHTML = (options.allowHTML !== null || options.allowHTML !== undefined) ? options.allowHTML : false\n\n        this._data = null;\n\n        if (options.data && !options.state) {\n            this._data = new Proxy(options.data, utilities.dataHandler(this));\n        }\n\n        if (this.state) {\n            this.state.attach(this);\n        }\n\n        if (this.attachTo.length) {\n            this.attachTo.forEach(a => {\n                a.attach(this);\n            })\n        }\n    }\n\n    get data() {\n        return this._data;\n    }\n\n    set data(value) {\n        if (this.state) return true;\n        this._data = new Proxy(value, utilities.dataHandler(this));\n        utilities.debounceRender(this);\n        return true;\n    }\n\n    attach(component) {\n        let attachments = utilities.getTypeOfObject(component) === 'array' ? component : [component];\n        for (let attachment of attachments) {\n            this.attached.push(attachment);\n        }\n    }\n\n    detach(component) {\n        let attachments = utilities.getTypeOfObject(component) === 'array' ? component : [component];\n        for (let attachment of attachments) {\n            const index = this.attached.indexOf(attachment);\n            if (index < 0) return;\n            this.attached.splice(index, 1);\n        }\n    }\n\n    render() {\n        if (this.isSharedState) {\n            dom.renderAttachments(this.attached, this);\n            return;\n        }\n\n        if (!this.template) {\n            console.error(\"No template.\");\n            return;\n        }\n\n        let element = utilities.getTypeOfObject(this.element) === 'string' ? document.querySelector(this.element) : this.element;\n        if (!element) {\n            console.log(\"No element.\");\n            return;\n        }\n\n        let data = utilities.copy((this.state ? this.state.data : this.data) || {}, this.allowHTML);\n\n        let template;\n        if (utilities.getTypeOfObject(this.template) === 'function') {\n            template = this.template(data, element, element);\n        } else {\n            template = this.template;\n        }\n\n        if (!['string', 'number'].includes(utilities.getTypeOfObject(template))) {\n            return;\n        }\n\n        element.innerHTML = template;\n\n        dom.renderAttachments(this.attached, this);\n\n        return element;\n    }\n}\n\nexport default Component;", "let Event = {};\nlet activeEvents = {};\n\nconst executable = (target, selector) => {\n    if ([\n        '*',\n        'window',\n        'document',\n        'document.documentElement',\n        window,\n        document,\n        document.documentElement\n    ].indexOf(selector) > -1) return true;\n\n    if (typeof selector !== 'string' && selector.contains) {\n        return selector === target || selector.contains(taarget);\n    }\n\n    return target.closest(selector);\n}\n\nconst getIndex = (array, selector, callback) => {\n    for (let i = 0; i < array.length; i++) {\n        if (array[i].selector === selector && array[i].callback.toString() === callback.toString()) {\n            return i;\n        }\n        return -1;\n    }\n}\n\nconst handler = event => {\n    if (!activeEvents[event.type]) return;\n    activeEvents[event.type].forEach(listener => {\n        if (!executable(event.target, listener.selector)) return;\n        listener.callback(event);\n    })\n}\n\nEvent.get = () => {\n    let o = {};\n    for (let type in activeEvents) {\n        if (activeEvents.hasOwnProperty(type)) {\n            o[type] = activeEvents[type];\n        }\n    }\n    return o;\n}\n\nEvent.on = (types, selector, callback) => {\n    if (!selector || !callback) return;\n\n    types.split(',').forEach(type => {\n        type = type.trim();\n        if (!activeEvents[type]) {\n            activeEvents[type] = [];\n            window.addEventListener(type, handler, true);\n        }\n\n        activeEvents[type].push({\n            selector,\n            callback\n        })\n    })\n}\n\nEvent.once = (types, selector, callback) => {\n    Event.on(types, selector, function temp(event) {\n        callback(event);\n        Event.off(types, selector, temp);\n    })\n}\n\nEvent.off = (types, selector, callback) => {\n    types.split(',').forEach(type => {\n        type = type.trim();\n\n        if (!activeEvents[type]) return;\n\n        if (activeEvents[type].length < 2 || !selector) {\n            delete activeEvents[type];\n            window.removeEventListener(type, handler, true);\n            return;\n        }\n\n        const index = getIndex(activeEvents[type], selector, callback);\n        if (index < 0) return;\n        activeEvents[type].splice(index, 1);\n    })\n}\n\nexport default Event;", "import Component from \"../component/index.js\";\n\nclass State extends Component {\n    constructor(options) {\n        options.isSharedState = true;\n        super(null, options);\n    }\n}\n\nexport default State;\n"],
  "mappings": "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",
  "names": []
}
